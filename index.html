<!DOCTYPE html>
<html lang="en" ng-app="listaTelefonica">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> Lista Telefonica | MyContacts </title>

    <link rel="stylesheet" href="./css/style.css">
    <script src="./lib/angular.js"></script>
    <link rel="stylesheet" href="./lib/bootstrap.css">


    <script>
        const app = angular.module("listaTelefonica", []);
        app.controller("listaT",
            function ($scope) {

                $scope.info = " Lista Telefonica ";

                $scope.contatos = [
                    { nome: "Adilson", telefone: "932392875", cor: "cyan" },
                    { nome: "Mario", telefone: "912346712", cor: "purple" },
                    { nome: "Erica", telefone: "222459000", cor: "oragen" },
                    { nome: "Hilquias", telefone: "934213312", cor: "teal" },
                    { nome: "Filomena", telefone: "222090807", cor: "red" }
                ];

                $scope.operadoras = [
                    { codigo: "93", nome: "Unitel", categoria: "Celular" },
                    { codigo: "91", nome: "Movicel", categoria: "Celular" },
                    { codigo: "222", nome: "AngolaTelecom", categoria: "Fixa" }
                ];

                $scope.adicionarcontato = function (contato) {
                    const cp = angular.copy(contato);
                    $scope.contatos.push(cp);
                    delete $scope.contato;
                    $scope.contatoForm.$setPristine();
                };

                $scope.ApagarContatos = function (contatos) {
                    $scope.contatos = contatos.filter(function (contato) {
                        if (!contato.selecionado) return contato;
                    });
                };

                $scope.iscontatoSel = function (contatos) {
                    return contatos.some(function (contato) {
                        return contato.selecionado;
                    });
                };

                $scope.add_classe_cor = "selecionado";
                $scope.add_classe_negrito = "negrito";


            });


    </script>
</head>

<body ng-controller="listaT">

    <div class="main-center jumbotron">

        <h3>{{info+' Jupiter Academy'}}</h3>

        <!-- table-stripe retirar para poder selecionar todos amarelos -->
        <table class="table table-striped" ng-show="contatos.length>0">
            <tr>
                <th>Ativador</th>
                <th>Nome</th>
                <th>Telefone</th>
                <th>Operadora</th>
                <th>Cor Favorita</th>
            </tr>
            <!--ng-class="[add_classe_cor,add_classe_negrito]" 
                 -->
            <tr ng-class="{'selecionado negrito': cnt.selecionado }" ng-repeat="cnt in contatos">
                <td> <input type="checkbox" ng-model="cnt.selecionado" /> </td>
                <td>{{cnt.nome}}</td>
                <td>{{cnt.telefone}}</td>
                <td>{{cnt.operadora.nome}}</td>
                <td>
                    <div class="basicos" ng-style="{'background-color' : cnt.cor}"></div>
                </td>
            </tr>
        </table>
        <hr>

        <div class="input-box">

            <form action="" name="contatoForm">
                <input type="text" ng-model="contato.nome" name="nomeInp" placeholder="Digite Nome" class="form-control"
                    ng-required="true" ng-minlength="10">
                <input type="text" ng-model="contato.telefone" name="telefoneInp" placeholder="Digite Telefone"
                    class="form-control" ng-required="true" ng-pattern="/^\d{9,12}$/">

                <select ng-model="contato.operadora" class="form-control"
                    ng-options="opera.nome group by opera.categoria for opera in operadoras" id="">
                    <option value="">Selecione a Operadora</option>
                </select>
            </form>

            <br>

            <div ng-messages="contatoForm.nomeInp.$error" class="alert alert-danger">
                <div ng-message="required">
                    Por favor Preencher o Nome
                </div>
                <div ng-show="minlength">
                    Preencher devidamente com ate 10 Letras
                </div>
            </div>

            <div ng-messages="contatoForm.telefoneInp.$error" class="alert alert-danger">
                <div ng-message="required">
                    Por favor Preencher o Telefone
                </div>

                <div ng-show="pattern">
                    Preencher o Telefone assim DDDXXXNNN ou 244DDDXXXNNN
                </div>
            </div>
            

            <button ng-click="adicionarcontato(contato)" ng-disabled="contatoForm.$invalid"
                class="btn btn-primary btn-block"> Adicionar Contacto</button>

            <button ng-click="ApagarContatos(contatos)" ng-if="iscontatoSel(contatos)" class="btn btn-danger btn-block">
                Eliminar Contacto</button>
        </div>

        <!-- adicionando elemento externo ng-include -->
        <div ng-include=" 'footer.html' "></div>

    </div>
    <!--  incluir ficheiro adicional -->
    <script src="./javascript/main.js"></script>
</body>

</html>








<!--
         <h1 ng-bind="info"></h1>  
            <tr ng-repeat="cnt in contatos">
                <td ng-repeat="(key,value) in cnt" >
                        {{value}}
                </td>
            </tr>

                <label for="">{{nome}}</label>
        <label for=""> {{telefone}}</label> 

              
                <div class="alert alert-danger" ng-show="contatoForm.$invalid">
                    Por favor Preencher os Nome e Telefone  
                </div>
                    //ng-disabled="!contato.nome || !contato.telefone"

                    //  /^\d{9,13}$/  932392875    

        // usando no controler para seleciona um contato pela check e listar eles 
          $scope.ApagarContatos=function(contatos){
                    const selContato=contatos.filter(function (contato){
                        if(contato.selecionado)  return contato;
                   });
                   console.log(selContato);
                };
            -->